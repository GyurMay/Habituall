{"ast":null,"code":"import _regeneratorRuntime from\"/Users/gyurmeydorj/Habituall/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/gyurmeydorj/Habituall/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/gyurmeydorj/Habituall/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{useDebounce}from'use-debounce';import habitService from\"../services/habitService\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var _require=require(\"../context/AuthContext\"),useAuth=_require.useAuth;var SearchBar=function SearchBar(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),searchVal=_useState2[0],setSearchVal=_useState2[1];var _useDebounce=useDebounce(searchVal,300),_useDebounce2=_slicedToArray(_useDebounce,1),searchValue=_useDebounce2[0];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),results=_useState4[0],setResults=_useState4[1];useEffect(function(){//  console.log(searchVal);\nif(searchValue.replaceAll(' ','')===''){setResults([]);return;}console.log(searchValue,\"searchValue\");_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var resp,respJson;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return habitService.search(searchValue);case 2:resp=_context.sent;if(resp.ok){_context.next=5;break;}return _context.abrupt(\"return\");case 5:_context.next=7;return resp.json();case 7:respJson=_context.sent;console.log(respJson,\"search result\");setResults(respJson);case 10:case\"end\":return _context.stop();}},_callee);}))();return function(){};},[searchValue]);var handleChange=function handleChange(e){setSearchVal(e.target.value);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{id:\"searchbox\",className:\"\",children:/*#__PURE__*/_jsx(\"input\",{id:\"searchInput\",type:\"text\",value:searchVal,placeholder:\"Search name or username\",onChange:handleChange,className:\"text-center border border-dark w-1/2 \"})}),/*#__PURE__*/_jsx(\"div\",{className:\"searchResultsContainer w-1/2\",children://search results\nresults.map(function(uname){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-content-center my-1\",children:/*#__PURE__*/_jsxs(Link,{className:\"searchResult relative rounded text-center text-white py-3\",to:'/users/'+uname.username,children:[\" @\",uname.username]})});})})]});};var Search=function Search(props){var auth=useAuth();if(!auth.isAuthenticated)return/*#__PURE__*/_jsx(_Fragment,{});return/*#__PURE__*/_jsx(SearchBar,{});};export{Search};","map":{"version":3,"names":["useEffect","useState","useDebounce","habitService","Link","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","_require","require","useAuth","SearchBar","props","_useState","_useState2","_slicedToArray","searchVal","setSearchVal","_useDebounce","_useDebounce2","searchValue","_useState3","_useState4","results","setResults","replaceAll","console","log","_asyncToGenerator","_regeneratorRuntime","mark","_callee","resp","respJson","wrap","_callee$","_context","prev","next","search","sent","ok","abrupt","json","stop","handleChange","e","target","value","children","id","className","type","placeholder","onChange","map","uname","to","username","Search","auth","isAuthenticated"],"sources":["/Users/gyurmeydorj/Habituall/client/src/components/Search.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useDebounce } from 'use-debounce';\nimport habitService from \"../services/habitService\";\nimport { Link } from \"react-router-dom\";\n\nconst { useAuth } = require(\"../context/AuthContext\")\n\nconst SearchBar = props => {\n\n   const [searchVal, setSearchVal] = useState('');\n   const [searchValue] = useDebounce(searchVal, 300);\n   const [results, setResults] = useState([]);\n\n   useEffect(() => {\n   //  console.log(searchVal);\n      if(searchValue.replaceAll(' ', '') === ''){\n         setResults([]);\n         return;\n      }\n      console.log(searchValue, \"searchValue\");\n      (async() => {\n         const resp = await habitService.search(searchValue);\n         // if(resp.ok) console.log(resp.username);\n         if(!resp.ok) return;\n         const respJson = await resp.json();\n         console.log(respJson, \"search result\");\n         setResults(respJson);\n      })();\n      return () => {\n         \n      }\n   }, [searchValue]);\n\n   const handleChange = (e) => {\n    setSearchVal(e.target.value);\n   }\n\n   return (\n  <> \n<div id=\"searchbox\" className=\"\">\n      <input id=\"searchInput\" type=\"text\" value={searchVal} placeholder=\"Search name or username\" onChange={handleChange} className=\"text-center border border-dark w-1/2 \"/>\n</div>\n<div className=\"searchResultsContainer w-1/2\">\n   { //search results\n         (results.map(uname => \n            (\n            <div className=\"flex justify-content-center my-1\">\n               <Link className={\"searchResult relative rounded text-center text-white py-3\"} to={'/users/'+ uname.username}> @{uname.username}</Link>\n            </div>\n            )\n         ))\n   }\n</div>\n</>\n   )\n};\n\nconst Search = (props) => {\n   let auth = useAuth()\n   if(!auth.isAuthenticated) return <></>\n\n\n   return <SearchBar />\n}\n\nexport {Search}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}