{"ast":null,"code":"import _objectSpread from\"/Users/gyurmeydorj/Habituall/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/Users/gyurmeydorj/Habituall/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/gyurmeydorj/Habituall/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/gyurmeydorj/Habituall/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/gyurmeydorj/Habituall/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useRef,useState}from\"react\";import{Navigate,useNavigate,useParams}from\"react-router-dom\";import{useSharedContext}from\"../context/SharedContext\";import habitService from\"../services/habitService\";import TrashIcon from\"../components/icons/TrashIcon\";import CommentElem from\"../components/CommentElem\";import Calendar from\"react-calendar\";import'react-calendar/dist/Calendar.css';import{CalendarComp}from\"../components/CalendarComp\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DEFAULT_HABIT_ID=100;var currDate=new Date();currDate=currDate.toDateString();var randomString=function randomString(length){return Array.from({length:length},function(){return Math.random().toString(36).charAt(2);}).join('');};var Tick=function Tick(props){return/*#__PURE__*/_jsx(\"div\",{className:\"habitDone mb-1 w-[40px]\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex h-[40px] items-center justify-center rounded-full bg-lime-500\"+\" \"+(props.done?\"note_status\":\"\"),children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",x:\"0px\",y:\"0px\",width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",className:\"\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M 20.292969 5.2929688 L 9 16.585938 L 4.7070312 12.292969 L 3.2929688 13.707031 L 9 19.414062 L 21.707031 6.7070312 L 20.292969 5.2929688 z\"})})})});};var calendarStyleAppend=function calendarStyleAppend(note){var convertToCalendarDate=function convertToCalendarDate(dateStr){var date=new Date(dateStr);var options={year:'numeric',month:'long',day:'numeric'};return date.toLocaleDateString('en-US',options);};var calendarStyle=\"[aria-label=\\\"\".concat(convertToCalendarDate(note.date),\"\\\"] { \\n      color: \").concat(note.done?'green':'red',\";\\n      border: 3px solid \").concat(note.done?'green':'red',\";\\n    }\");return calendarStyle;};var HabitNote=function HabitNote(props){var note=props.note,owner=props.owner,experimental=props.experimental,submitNote=props.submitNote;var _ref=props.customDate||[null,null],_ref2=_slicedToArray(_ref,2),customDate=_ref2[0],setCustomDate=_ref2[1];var noteDate=note.date;return new Date().toDateString()!==noteDate?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"habitNote_text text-md flex h-[45px] w-full resize-none items-end justify-start border-b-2 border-b-gray-200 focus:outline-none\",children:note.note})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"textarea\",{id:\"textarea\",placeholder:\"any note for today?\",className:\"habitNote text-md flex h-[45px] w-full resize-none items-end justify-start border-dashed border-b-2 border-b-black focus:outline-none\",defaultValue:note.note}),experimental&&/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:customDate,onChange:function onChange(e){return setCustomDate(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{onClick:submitNote,className:\"btn btn-primary mt-2 flex\",children:\"SAVE\"})]});};function ShowHabitPage(props){var navigate=useNavigate();var params=useParams();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),currNote=_useState2[0],setCurrNote=_useState2[1];var _useSharedContext=useSharedContext(),navLinks=_useSharedContext.navLinks,setNavLinks=_useSharedContext.setNavLinks;var newNote={\"date\":new Date().toDateString(),\"note\":\"\",\"done\":undefined};var _useState3=useState(newNote),_useState4=_slicedToArray(_useState3,2),noteObj=_useState4[0],setNoteObj=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),calendarStyle=_useState6[0],setCalendarStyle=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),notes=_useState8[0],setNotes=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),reloadNotes=_useState10[0],setReloadNotes=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),todayNoteExist=_useState12[0],setTodayNoteExist=_useState12[1];var _useState13=useState({makeHabit:'1'}),_useState14=_slicedToArray(_useState13,2),currHabit=_useState14[0],setCurrHabit=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),customDate=_useState16[0],setCustomDate=_useState16[1];var _useState17=useState(new Date()),_useState18=_slicedToArray(_useState17,2),calendarVal=_useState18[0],calendarChange=_useState18[1];useEffect(function(){var date=calendarVal.toDateString();var dateIsLogged=false;notes.forEach(function(x){if(x.date===date)dateIsLogged=true;});if(!dateIsLogged)return;document.location.href='#'+date;return function(){};},[calendarVal]);useEffect(function(){console.log(navLinks,\"navlink 1\");var currhb=navLinks.find(function(x){return x.makeHabit==params.id;})?navLinks.find(function(x){return x.makeHabit==params.id;}):[];setCurrHabit(currhb);console.log(\"params.id changed\",params.id,currHabit);},[navLinks,params.id]);useEffect(function(){//loadNote upon navbar habit being clicked\nvar fetchNotes=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var notes,notes2;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return habitService.loadNotes(currHabit.makeHabit);case 2:notes=_context.sent;_context.next=5;return notes.json();case 5:notes2=_context.sent;console.log(\"notes fetched 2\",notes2);if(notes2[0]){setNotes(notes2[0].notes);setTodaysNote(notes2[0].notes);//not a state\n}case 8:case\"end\":return _context.stop();}},_callee);}));return function fetchNotes(){return _ref3.apply(this,arguments);};}();fetchNotes();console.log(currHabit,\"currHabit makeHabit changed\",notes);var setTodaysNote=function setTodaysNote(notes){var todaysNoteUndefined=(notes===null||notes===void 0?void 0:notes.find(function(x){return new Date(x.date).toDateString()===currDate;}))===undefined;if(todaysNoteUndefined){setNoteObj(newNote);setNotes(function(notes){return[].concat(_toConsumableArray(notes),[newNote]);});return;}console.log(\"notes exists, setting todays note\",notes,todaysNoteUndefined);setTodayNoteExist(true);//else set the found note as todays note\nsetNoteObj(//find if todays note if exist, else create new empty note el\nnotes.find(function(x){return new Date(x.date).toDateString()===currDate;}));};return function(){setReloadNotes(false);};},[currHabit.makeHabit,reloadNotes]);var c=0;// useEffect(() => {\n//   console.log(noteObj, \"new habit uf\", c++)\n// }, [noteObj.note, noteObj.tick]);\nvar _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),saveStatus=_useState20[0],setSaveStatus=_useState20[1];var logDay=function logDay(state,habitDate){if(habitDate!==currDate)return;var markedDone=state===\"tick\";saveNote();// if(props.id == \"today\") habit = noteObj; \nvar saveStatus=function saveStatus(){if(noteObj.done===undefined||noteObj.done&&!markedDone||!noteObj.done&&markedDone){setNoteObj(function(noteObj){return _objectSpread(_objectSpread({},noteObj),{},{\"done\":markedDone});});}else if(noteObj.done!==undefined&&noteObj.done&&markedDone||!noteObj.done&&state!==\"tick\"){setNoteObj(function(noteObj){return _objectSpread(_objectSpread({},noteObj),{},{\"done\":undefined});});}};saveStatus();};var updateNoteDB=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var resp;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0://this is the client side logic\n// const currNoteInx = currHabit.notes.findIndex(x => x.date === noteObj.date);\n// const newHabit = currHabit;\n// if(currNoteInx == -1){\n//   newHabit.notes.push(noteObj);\n// }else{\n//   newHabit.notes[currNoteInx] = noteObj;\n// }\n// console.log(\"new Habit will be\", currHabit.notes[currNoteInx], newHabit);\n// console.log(\"new habit navlink\", navLinks )  \n// habitService.updateHabit(currHabit.habitId, newHabit); //calling server logic\nconsole.log(\"noteObj updating\",noteObj);if(customDate!==\"\")noteObj.date=new Date(customDate).toDateString();_context2.next=4;return habitService.createNote(noteObj,currHabit.makeHabit);case 4:resp=_context2.sent;if(!resp.ok){_context2.next=8;break;}setReloadNotes(true);return _context2.abrupt(\"return\");case 8:console.error(resp,\"note not created\");case 9:case\"end\":return _context2.stop();}},_callee2);}));return function updateNoteDB(){return _ref4.apply(this,arguments);};}();var saveNote=function saveNote(){setNoteObj(function(noteObj){return _objectSpread(_objectSpread({},noteObj),{},{\"note\":document.querySelector('#textarea').value});});console.log(\"new Habit saveNOte\",noteObj);};var submitNote=function submitNote(){saveNote();setSaveStatus(true);};useEffect(function(){if(saveStatus){updateNoteDB();}return function(){setSaveStatus(false);console.log(\"cleanup called\",saveStatus);};},[saveStatus]);var experimental=false;var deleteNote=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(makeHabit,noteId){var resp;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return habitService.deleteNote(makeHabit,noteId);case 2:resp=_context3.sent;if(resp.ok/*&& resp.json().modifiedCount == */){console.log(\"note deleted\",noteId);// setNotes(notes => ...notes);\nsetReloadNotes(true);}case 4:case\"end\":return _context3.stop();}},_callee3);}));return function deleteNote(_x,_x2){return _ref5.apply(this,arguments);};}();var HabitElem=function HabitElem(props){var habit=props.habit;// const {className} = props;\nvar todaysNote=props.id==\"today\";var today=false;if(todaysNote){habit=noteObj;today=true;}console.log(habit,\"habitelem habit\",currHabit.makeHabit);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{id:habit.date,className:props.className+\" \".concat(today?'text-white':'',\" \")+\" m-4 mt-8 flex h-auto flex-row rounded-md border-2 p-2 \"+(habit.done?\"habitDone\":\"habitMissed\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-5/6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"habitDate border-l-black border-4  font-bold flex h-[45px] items-center justify-center border-transparent text-center align-middle\",children:habit.date}),/*#__PURE__*/_jsx(HabitNote,{submitNote:submitNote,customDate:[customDate,setCustomDate],experimental:experimental,note:habit})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-1/6 flex-col items-center justify-center border-0 border-black\",children:[!todaysNote&&/*#__PURE__*/_jsx(TrashIcon,{onClick:function onClick(){return deleteNote(currHabit.makeHabit,habit.noteId);}}),/*#__PURE__*/_jsx(\"div\",{className:\"habitDone\",id:'tick'+habit.date,onClick:function onClick(){return logDay('tick',habit.date);},children:/*#__PURE__*/_jsx(Tick,{done:habit.done})}),/*#__PURE__*/_jsx(\"div\",{id:'cross'+habit.date,onClick:function onClick(){return logDay('cross',habit.date);},className:\"habitMissed right-9 top-[50px] flex h-[40px] w-[40px] items-center justify-center rounded-full bg-red-400\"+\" \"+(habit.done==false?\"note_status\":\"\"),children:\"x\"})]}),props.children]})});};var calstyle='';var daysRemaining=Math.floor((new Date(currHabit.dueDate)-new Date())/(1000*60*60*24));return currHabit&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"makeBreakBox\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\" \",/*#__PURE__*/_jsx(\"strong\",{className:\"text-success\",children:\" MAKE:\"}),\" \",currHabit.makeHabit,\" \"]}),/*#__PURE__*/_jsxs(\"h2\",{children:[\" \",/*#__PURE__*/_jsx(\"strong\",{className:\"text-danger\",children:\" BREAK:\"}),\" \",currHabit.breakHabit,\" \"]}),/*#__PURE__*/_jsxs(\"h2\",{children:[new Date(currHabit.createDate).toDateString(),\" - \",new Date(currHabit.dueDate).toDateString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"habitNotesContainer\",children:[notes.map(function(note){calstyle+=calendarStyleAppend(note);console.log(calstyle,\"calst\");return note.date!==noteObj.date?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(HabitElem,{className:\"habitNote \".concat(calendarVal.toDateString()===note.date?'selected':''),habit:note}),/*#__PURE__*/_jsx(CommentElem,{noteId:note.noteId},note.noteId)]}):daysRemaining>0&&/*#__PURE__*/_jsx(HabitElem,{habit:noteObj,id:\"today\"});}),// /**if no notes at all */\n// if(notes.length == 0 && daysRemaining > 0) ? <div>jpt</div> : <></>)\nnotes.length==0&&daysRemaining>0&&/*#__PURE__*/_jsx(HabitElem,{habit:noteObj,id:\"today\"}),/*#__PURE__*/_jsx(CalendarComp,{createDate:currHabit.createDate,dueDate:currHabit.dueDate,calendarStyle:calstyle,calendarState:[calendarVal,calendarChange]}),daysRemaining>0?/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:daysRemaining}),\" days left\"]}):/*#__PURE__*/_jsx(\"h1\",{children:\"due passed\"})]})]})});};export{ShowHabitPage,HabitNote,CalendarComp,calendarStyleAppend};","map":{"version":3,"names":["useEffect","useRef","useState","Navigate","useNavigate","useParams","useSharedContext","habitService","TrashIcon","CommentElem","Calendar","CalendarComp","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","DEFAULT_HABIT_ID","currDate","Date","toDateString","randomString","length","Array","from","Math","random","toString","charAt","join","Tick","props","className","children","done","xmlns","x","y","width","height","viewBox","d","calendarStyleAppend","note","convertToCalendarDate","dateStr","date","options","year","month","day","toLocaleDateString","calendarStyle","concat","HabitNote","owner","experimental","submitNote","_ref","customDate","_ref2","_slicedToArray","setCustomDate","noteDate","id","placeholder","defaultValue","type","value","onChange","e","target","onClick","ShowHabitPage","navigate","params","_useState","_useState2","currNote","setCurrNote","_useSharedContext","navLinks","setNavLinks","newNote","undefined","_useState3","_useState4","noteObj","setNoteObj","_useState5","_useState6","setCalendarStyle","_useState7","_useState8","notes","setNotes","_useState9","_useState10","reloadNotes","setReloadNotes","_useState11","_useState12","todayNoteExist","setTodayNoteExist","_useState13","makeHabit","_useState14","currHabit","setCurrHabit","_useState15","_useState16","_useState17","_useState18","calendarVal","calendarChange","dateIsLogged","forEach","document","location","href","console","log","currhb","find","fetchNotes","_ref3","_asyncToGenerator","_regeneratorRuntime","mark","_callee","notes2","wrap","_callee$","_context","prev","next","loadNotes","sent","json","setTodaysNote","stop","apply","arguments","todaysNoteUndefined","_toConsumableArray","c","_useState19","_useState20","saveStatus","setSaveStatus","logDay","state","habitDate","markedDone","saveNote","_objectSpread","updateNoteDB","_ref4","_callee2","resp","_callee2$","_context2","createNote","ok","abrupt","error","querySelector","deleteNote","_ref5","_callee3","noteId","_callee3$","_context3","_x","_x2","HabitElem","habit","todaysNote","today","calstyle","daysRemaining","floor","dueDate","breakHabit","createDate","map","calendarState"],"sources":["/Users/gyurmeydorj/Habituall/client/src/pages/ShowHabitPage.js"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\r\nimport { Navigate, useNavigate, useParams } from \"react-router-dom\"\r\nimport { useSharedContext } from \"../context/SharedContext\";\r\nimport habitService from \"../services/habitService\";\r\nimport TrashIcon from \"../components/icons/TrashIcon\";\r\nimport CommentElem from \"../components/CommentElem\";\r\nimport Calendar from \"react-calendar\";\r\nimport 'react-calendar/dist/Calendar.css';\r\nimport { CalendarComp } from \"../components/CalendarComp\";\r\n\r\n\r\nconst DEFAULT_HABIT_ID = 100;\r\nlet currDate = new Date();\r\ncurrDate = currDate.toDateString();\r\nconst randomString = length => Array.from({length}, () => Math.random().toString(36).charAt(2)).join('');\r\n\r\nconst Tick = (props) => {\r\n  return (\r\n  <div className=\"habitDone mb-1 w-[40px]\">\r\n    <div className={\"flex h-[40px] items-center justify-center rounded-full bg-lime-500\" + \" \" + (props.done ? \"note_status\" : \"\")}>\r\n      <svg xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" className=\"\">\r\n        <path d=\"M 20.292969 5.2929688 L 9 16.585938 L 4.7070312 12.292969 L 3.2929688 13.707031 L 9 19.414062 L 21.707031 6.7070312 L 20.292969 5.2929688 z\"></path>\r\n      </svg>\r\n    </div>\r\n    </div>\r\n    );\r\n  };\r\n\r\nconst calendarStyleAppend = (note) => {\r\n    \r\n    const convertToCalendarDate = (dateStr) => {\r\n      const date = new Date(dateStr);\r\n      const options = { year: 'numeric', month: 'long', day: 'numeric' };\r\n      return date.toLocaleDateString('en-US', options);\r\n    }\r\n\r\n    const calendarStyle = `[aria-label=\"${convertToCalendarDate(note.date)}\"] { \r\n      color: ${note.done ? 'green' : 'red'};\r\n      border: 3px solid ${note.done ? 'green' : 'red'};\r\n    }`;\r\n    return calendarStyle;\r\n};\r\n\r\nconst HabitNote = props => {\r\n  const {note, owner, experimental, submitNote} = props;\r\n  const [customDate, setCustomDate] = props.customDate || [null, null];\r\n  let noteDate = note.date;\r\n  return (\r\n    new Date().toDateString() !== noteDate ?\r\n    <>\r\n      <div className=\"habitNote_text text-md flex h-[45px] w-full resize-none items-end justify-start border-b-2 border-b-gray-200 focus:outline-none\">\r\n        {note.note}\r\n      </div>  \r\n    </>\r\n    :\r\n    <>\r\n      <textarea id=\"textarea\" placeholder=\"any note for today?\" className=\"habitNote text-md flex h-[45px] w-full resize-none items-end justify-start border-dashed border-b-2 border-b-black focus:outline-none\" defaultValue={note.note} ></textarea>\r\n      {experimental && <input type=\"date\" value={customDate} onChange={e => setCustomDate(e.target.value)} />}\r\n      <button onClick={submitNote} className=\"btn btn-primary mt-2 flex\">SAVE</button>\r\n    </>\r\n  )\r\n};\r\n\r\n\r\n function ShowHabitPage(props){\r\n  const navigate = useNavigate();\r\n  const params = useParams();\r\n  const [currNote, setCurrNote] = useState('')\r\n  const {navLinks, setNavLinks} = useSharedContext();\r\n  let newNote = {\r\n    \"date\": (new Date()).toDateString(),\r\n    \"note\":\"\",\r\n    \"done\": undefined\r\n  };\r\n  const [noteObj, setNoteObj] = useState(newNote);\r\n  const [calendarStyle, setCalendarStyle] = useState(``);\r\n  \r\n  const [notes, setNotes] = useState([]);\r\n  const [reloadNotes, setReloadNotes] = useState(false);\r\n  const [todayNoteExist, setTodayNoteExist] = useState(false);\r\n\r\n  const [currHabit, setCurrHabit] = useState({makeHabit:'1'});\r\n  \r\n  \r\n  const [customDate, setCustomDate] = useState(\"\");\r\n\r\n  const [calendarVal, calendarChange] = useState(new Date());\r\n\r\n\r\n  useEffect(() => {\r\n    const date = calendarVal.toDateString();\r\n    let dateIsLogged = false;\r\n    notes.forEach(x => {\r\n      if(x.date === date) dateIsLogged = true;\r\n    });\r\n    if(!dateIsLogged) return;\r\n    document.location.href = ('#'+date);\r\n    return () => {};\r\n  }, [calendarVal]);\r\n\r\n\r\n  useEffect(() => {\r\n    console.log(navLinks, \"navlink 1\")\r\n    let currhb = navLinks.find(x => x.makeHabit == params.id)?navLinks.find(x => x.makeHabit == params.id): [] ;\r\n    setCurrHabit(currhb);\r\n    console.log(\"params.id changed\", params.id, currHabit)\r\n  }, [navLinks, params.id]);\r\n  \r\n  useEffect(() => {  //loadNote upon navbar habit being clicked\r\n    const fetchNotes = async() => {\r\n      const notes = await habitService.loadNotes(currHabit.makeHabit);\r\n      // console.log(notes, \"notes fethced 2\")\r\n      const notes2 = await notes.json();\r\n      console.log(\"notes fetched 2\", notes2)\r\n      if(notes2[0]){\r\n        setNotes(notes2[0].notes);\r\n        setTodaysNote(notes2[0].notes); //not a state\r\n      }\r\n    };\r\n    fetchNotes();\r\n\r\n    console.log(currHabit, \"currHabit makeHabit changed\", notes);\r\n    const setTodaysNote = (notes) => {\r\n      let todaysNoteUndefined = notes?.find(x => (new Date(x.date)).toDateString() === currDate) === undefined;\r\n      if(todaysNoteUndefined){\r\n        setNoteObj(newNote);\r\n        setNotes(notes => [...notes, newNote])\r\n        return;\r\n      }\r\n      console.log(\"notes exists, setting todays note\", notes, todaysNoteUndefined)\r\n\r\n      setTodayNoteExist(true);\r\n      //else set the found note as todays note\r\n      setNoteObj( //find if todays note if exist, else create new empty note el\r\n        notes.find(x => (new Date(x.date)).toDateString() === currDate)\r\n      );\r\n    };\r\n\r\n    return () => {\r\n      setReloadNotes(false)\r\n    }\r\n  }, [currHabit.makeHabit, reloadNotes]);\r\n\r\n  \r\nlet c = 0;\r\n\r\n// useEffect(() => {\r\n//   console.log(noteObj, \"new habit uf\", c++)\r\n// }, [noteObj.note, noteObj.tick]);\r\n\r\nconst [saveStatus, setSaveStatus] = useState(false);\r\nconst logDay = (state, habitDate) => {\r\n  if(habitDate !== currDate) return\r\n  let markedDone = state === \"tick\"; \r\n  saveNote();\r\n \r\n  // if(props.id == \"today\") habit = noteObj; \r\n\r\n  const saveStatus = () => {\r\n    if(noteObj.done === undefined || noteObj.done && !markedDone || !noteObj.done && markedDone){\r\n      setNoteObj(noteObj => ({ ...noteObj, \"done\": markedDone}));\r\n    }else if(noteObj.done !== undefined && (noteObj.done && markedDone) || (!noteObj.done && state !== \"tick\")){\r\n      setNoteObj(noteObj => ({...noteObj, \"done\" : undefined}))\r\n    }\r\n  }\r\n  saveStatus();\r\n};\r\n\r\nconst updateNoteDB = async () => {\r\n\r\n  //this is the client side logic\r\n  // const currNoteInx = currHabit.notes.findIndex(x => x.date === noteObj.date);\r\n  // const newHabit = currHabit;\r\n  // if(currNoteInx == -1){\r\n  //   newHabit.notes.push(noteObj);\r\n  // }else{\r\n  //   newHabit.notes[currNoteInx] = noteObj;\r\n  // }\r\n  // console.log(\"new Habit will be\", currHabit.notes[currNoteInx], newHabit);\r\n  // console.log(\"new habit navlink\", navLinks )  \r\n  // habitService.updateHabit(currHabit.habitId, newHabit); //calling server logic\r\n  console.log(\"noteObj updating\", noteObj);\r\n  if(customDate !== \"\") noteObj.date = new Date(customDate).toDateString();\r\n  const resp = await habitService.createNote(noteObj, currHabit.makeHabit)\r\n  if(resp.ok){\r\n    setReloadNotes(true)\r\n    return;\r\n  }\r\n  console.error(resp, \"note not created\")\r\n}\r\n\r\n\r\nconst saveNote = () => {\r\n  setNoteObj(noteObj => ({...noteObj, \"note\": document.querySelector('#textarea').value}));\r\n  console.log(\"new Habit saveNOte\", noteObj);\r\n}\r\nconst submitNote = () => {\r\n  saveNote();\r\n  setSaveStatus(true);\r\n}\r\n\r\nuseEffect(() => {\r\n  if(saveStatus){\r\n    updateNoteDB();\r\n  }\r\n  return () => {\r\n    setSaveStatus(false);\r\n    console.log(\"cleanup called\", saveStatus)\r\n  }\r\n}, [saveStatus]);\r\n\r\nconst experimental = false;  \r\n\r\nconst deleteNote = async (makeHabit, noteId) => {\r\n\r\n  const resp = await habitService.deleteNote(makeHabit, noteId);\r\n  if(resp.ok /*&& resp.json().modifiedCount == */){\r\n    console.log(\"note deleted\", noteId);\r\n    // setNotes(notes => ...notes);\r\n    setReloadNotes(true);\r\n\r\n  }\r\n}\r\n\r\n\r\nconst HabitElem = props => {\r\n\r\n  let habit = props.habit;\r\n  // const {className} = props;\r\n  const todaysNote = props.id == \"today\";\r\n  let today = false;\r\n  if(todaysNote){\r\n    habit = noteObj;\r\n    today=true;\r\n  }\r\n\r\n  console.log(habit, \"habitelem habit\", currHabit.makeHabit)\r\n\r\n  return (\r\n    <>\r\n  <div id={habit.date} className={props.className + ` ${today ? 'text-white':''} ` +\" m-4 mt-8 flex h-auto flex-row rounded-md border-2 p-2 \"+(habit.done ? \"habitDone\" : \"habitMissed\")}>\r\n    <div className=\"w-5/6\">\r\n        <div className=\"habitDate border-l-black border-4  font-bold flex h-[45px] items-center justify-center border-transparent text-center align-middle\">\r\n          {habit.date}\r\n        </div>\r\n        <HabitNote submitNote={submitNote} customDate={[customDate, setCustomDate]} experimental={experimental} note={habit}/>\r\n    </div>\r\n\r\n  {/*stands to the side*/}\r\n    <div className=\"flex w-1/6 flex-col items-center justify-center border-0 border-black\">\r\n      {(!todaysNote && <TrashIcon onClick={() => deleteNote(currHabit.makeHabit, habit.noteId)} />)} \r\n      <div className=\"habitDone\" id={'tick'+habit.date} onClick = {() => logDay('tick', habit.date)} >\r\n        <Tick done={habit.done} />\r\n      </div>\r\n      <div id={'cross'+habit.date} onClick={() => logDay('cross', habit.date)} className={\"habitMissed right-9 top-[50px] flex h-[40px] w-[40px] items-center justify-center rounded-full bg-red-400\"+ \" \" + (habit.done == false ? \"note_status\" : \"\")}>\r\n        x\r\n      </div>\r\n      </div>\r\n      \r\n  {props.children}\r\n  </div>\r\n  </>\r\n  );\r\n};\r\n\r\nlet calstyle= '';\r\nconst daysRemaining = (Math.floor(((new Date(currHabit.dueDate)) - (new Date()))/ (1000 * 60 * 60 * 24)));\r\n\r\n  return (   \r\n  (\r\n    currHabit &&\r\n    <>\r\n    <div className = \"container\">\r\n    <div id=\"makeBreakBox\">\r\n        <h2> <strong className=\"text-success\"> MAKE:</strong> {currHabit.makeHabit} </h2> \r\n        <h2> <strong className=\"text-danger\"> BREAK:</strong> {currHabit.breakHabit} </h2>\r\n        <h2>{new Date(currHabit.createDate).toDateString()} - {new Date(currHabit.dueDate).toDateString()}</h2>\r\n    </div>\r\n    <div className=\"habitNotesContainer\">\r\n    \r\n    {\r\n      \r\n    notes.map(note => \r\n      {\r\n        calstyle += (calendarStyleAppend(note))\r\n        console.log(calstyle, \"calst\");\r\n      \r\n      return ((note.date !== noteObj.date) ? ((\r\n        <>\r\n          <HabitElem className={`habitNote ${calendarVal.toDateString() === note.date ? 'selected' :''}`} habit={note}> \r\n          </HabitElem>\r\n          <CommentElem key={note.noteId} noteId={note.noteId} />\r\n        </>\r\n        )\r\n      )\r\n        : ((daysRemaining > 0) && <HabitElem habit={noteObj} id=\"today\"/>)\r\n    )}\r\n    )\r\n  }\r\n  {\r\n    // /**if no notes at all */\r\n    // if(notes.length == 0 && daysRemaining > 0) ? <div>jpt</div> : <></>)\r\n    notes.length == 0 && daysRemaining > 0 && <HabitElem habit={noteObj} id=\"today\" />\r\n  }\r\n  <CalendarComp createDate={currHabit.createDate} dueDate={currHabit.dueDate} calendarStyle={calstyle} calendarState={[calendarVal, calendarChange]} />\r\n  {\r\n  (daysRemaining>0 ? <h1><strong>{daysRemaining}</strong> days left</h1>: <h1>due passed</h1>)\r\n  }        \r\n</div>\r\n</div>\r\n</>\r\n  )\r\n    \r\n    )\r\n};  \r\n\r\nexport {ShowHabitPage, HabitNote, CalendarComp, calendarStyleAppend};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}