{"ast":null,"code":"var _jsxFileName = \"/Users/gyurmeydorj/Habituall/client/src/pages/HabitFormPage.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { useAuth } from \"../context/AuthContext\";\nimport { backendAPI } from \"../clientDotEnv\";\nimport habitService from \"../services/habitService\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function HabitFormPage(props) {\n  _s();\n  const params = useParams();\n  const auth = useAuth();\n  const [mh, setMh] = useState(params.makeHabit);\n  const [bh, setBh] = useState(\"\");\n  // useState\n  const [fdd, setFdd] = useState(\"\");\n  const [habitError, setHabitError] = useState(false);\n  useEffect(() => {\n    setMh(params.makeHabit);\n    setBh(\"\");\n    setFdd(\"\");\n  }, [params]);\n  const handleChange = event => {\n    setBh(document.querySelector(\"#fbh\").value);\n    setMh(document.querySelector(\"#fmh\").value);\n    setFdd(document.querySelector(\"#fdd\").value);\n  };\n  let host = backendAPI;\n\n  // host = 'http://192.168.1.147:3001' // comment if workign on same pc\n  // host = \"http://\"+require(\"os\").networkInterfaces()['en0'][1].address+\":3001\"; // comment line if not working on separate window\n  const navigate = useNavigate();\n  const createHabit = async jsonObj => {\n    //makeRequest\n    try {\n      const response = await habitService.createNewHabit(jsonObj);\n      // console.log(\"resp\", response);\n\n      if (!response.ok) {\n        setHabitError(true);\n        throw new Error(\"Can't create Habit\");\n      }\n      // setNavLink()\n      navigate('/habits/' + jsonObj.makeHabit);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n  function handleSubmit(event) {\n    event.preventDefault();\n    if (mh === '' || bh === '' || fdd === '') return;\n\n    // let daysRemaining = parseInt((((new Date(fdd)) - new Date())) / 1000 / 60/ 60 / 24) + 1;\n    // const date = new Date(fdd);\n    // console.log(date, \"dates  \")\n    // let lastId = document.querySelector('#navHabitList').lastElementChild.previousElementSibling.previousElementSibling.id.slice(1);\n    // let habitId = parseInt(lastId) + 1;\n    // console.log(habitId, mh, bh, daysRemaining)\n    const habitObj = {\n      makeHabit: mh,\n      breakHabit: bh,\n      dueDate: fdd.replaceAll('-', ' '),\n      createDate: new Date().toDateString()\n    };\n    console.log(habitObj);\n    createHabit(habitObj);\n    // let currLatestId = 103;\n\n    //make request to DB/backend and refresh\n    // makeDbRequest(mh, bh, fdd, parseInt(currLatestId));\n    //document.location.href = `http://${document.location.host}`;\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"main\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"container\",\n        className: \"text-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"createForm\",\n          className: \"text-4xl\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Create a New Habit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 65\n          }, this), habitError && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-danger\",\n            children: \"error: cant create habit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"Make Habit: \", /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"fmh\",\n              name: \"makeHabit\",\n              className: \"border-2 border-b-gray-700\",\n              value: mh,\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"Break Habit: \", /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"fbh\",\n              name: \"breakHabit\",\n              className: \"border-2 border-b-gray-700\",\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 38\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"Get done by: \", /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"fdd\",\n              name: \"dueDate\",\n              type: \"date\",\n              onChange: handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 38\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-success\",\n            onClick: handleSubmit,\n            children: \" SAVE \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n}\n_s(HabitFormPage, \"spOQ2TsfaxWkEAngmtCLZUwxRao=\", false, function () {\n  return [useParams, useAuth, useNavigate];\n});\n_c = HabitFormPage;\n;\nvar _c;\n$RefreshReg$(_c, \"HabitFormPage\");","map":{"version":3,"names":["useEffect","useState","useNavigate","useParams","useAuth","backendAPI","habitService","jsxDEV","_jsxDEV","Fragment","_Fragment","HabitFormPage","props","_s","params","auth","mh","setMh","makeHabit","bh","setBh","fdd","setFdd","habitError","setHabitError","handleChange","event","document","querySelector","value","host","navigate","createHabit","jsonObj","response","createNewHabit","ok","Error","e","console","log","handleSubmit","preventDefault","habitObj","breakHabit","dueDate","replaceAll","createDate","Date","toDateString","children","id","className","fileName","_jsxFileName","lineNumber","columnNumber","name","onChange","type","onClick","_c","$RefreshReg$"],"sources":["/Users/gyurmeydorj/Habituall/client/src/pages/HabitFormPage.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport { useAuth } from \"../context/AuthContext\";\r\nimport { backendAPI } from \"../clientDotEnv\";\r\nimport habitService from \"../services/habitService\";\r\n\r\n\r\nexport default function HabitFormPage(props){\r\n\r\n  const params = useParams();\r\n  const auth = useAuth();  \r\n\r\n  const [mh, setMh] = useState(params.makeHabit);\r\n  const [bh, setBh] = useState(\"\");\r\n    // useState\r\n  const [fdd, setFdd] = useState(\"\");\r\n  const [habitError, setHabitError] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setMh(params.makeHabit); setBh(\"\"); setFdd(\"\");\r\n  }, [params])\r\n  \r\n  const handleChange = (event) => {\r\n    setBh(document.querySelector(\"#fbh\").value);\r\n    setMh(document.querySelector(\"#fmh\").value);\r\n    setFdd(document.querySelector(\"#fdd\").value);\r\n  }\r\n  let host = backendAPI;\r\n\r\n  // host = 'http://192.168.1.147:3001' // comment if workign on same pc\r\n  // host = \"http://\"+require(\"os\").networkInterfaces()['en0'][1].address+\":3001\"; // comment line if not working on separate window\r\n  const navigate = useNavigate();\r\n  const createHabit = async (jsonObj) => {\r\n    //makeRequest\r\n    try{\r\n\r\n      const response = await habitService.createNewHabit(jsonObj);\r\n      // console.log(\"resp\", response);\r\n\r\n      if(!response.ok){\r\n        setHabitError(true);\r\n        throw new Error(\"Can't create Habit\");\r\n      }\r\n      // setNavLink()\r\n      navigate('/habits/'+jsonObj.makeHabit);\r\n    }catch(e){\r\n      console.log(e)\r\n    }\r\n  }\r\nfunction handleSubmit(event){\r\n    event.preventDefault();\r\n    if(mh === '' || bh === '' || fdd === '') return\r\n\r\n    // let daysRemaining = parseInt((((new Date(fdd)) - new Date())) / 1000 / 60/ 60 / 24) + 1;\r\n    // const date = new Date(fdd);\r\n    // console.log(date, \"dates  \")\r\n    // let lastId = document.querySelector('#navHabitList').lastElementChild.previousElementSibling.previousElementSibling.id.slice(1);\r\n    // let habitId = parseInt(lastId) + 1;\r\n    // console.log(habitId, mh, bh, daysRemaining)\r\n    const habitObj = {\r\n          makeHabit: mh,\r\n          breakHabit: bh,\r\n          dueDate: fdd.replaceAll('-', ' '),\r\n          createDate: (new Date()).toDateString()\r\n    }\r\n    console.log(habitObj);\r\n\r\n    createHabit(habitObj);\r\n    // let currLatestId = 103;\r\n\r\n    //make request to DB/backend and refresh\r\n    // makeDbRequest(mh, bh, fdd, parseInt(currLatestId));\r\n    //document.location.href = `http://${document.location.host}`;\r\n}\r\n\r\n    return (\r\n        <>\r\n        <div id=\"main\">\r\n            <div id=\"container\" className=\"text-center\">\r\n                <div id=\"createForm\" className=\"text-4xl\">\r\n                    <h1><strong>Create a New Habit</strong></h1><br />\r\n                    {habitError && (<p className=\"text-danger\">error: cant create habit</p>)}\r\n                    <h3>Make Habit: <input id=\"fmh\" name=\"makeHabit\" className=\"border-2 border-b-gray-700\" value={mh} onChange={handleChange}></input></h3>\r\n                    <h3>Break Habit: <input id=\"fbh\" name=\"breakHabit\" className=\"border-2 border-b-gray-700\" onChange={handleChange}></input></h3>\r\n                    <h3>Get done by: <input id=\"fdd\" name=\"dueDate\" type=\"date\" onChange={handleChange}></input></h3>\r\n                    {/* { (document.querySelector(\"#fmh\").value.length > 0) && (document.querySelector(\"#fbh\").value.length > 0) && (document.querySelector(\"#fdd\").value.length > 0) && ( */}\r\n                    <button className=\"btn btn-success\" onClick={handleSubmit}> SAVE </button>\r\n                    {/* )} */}\r\n\r\n                </div>\r\n            </div>  \r\n        </div>\r\n        </>\r\n    )\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}